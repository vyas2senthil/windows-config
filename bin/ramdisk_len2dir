#!/usr/bin/perl

$rdfilename = $ARGV[0];
open($file, "<", $rdfilename);
seek $file, -4, 2;
read $file, $len, 4;

$len = unpack("L", $len);

seek $file, 0, 0;
read $file, $content, $len;

chomp($dir=`basename $rdfilename-tmp`);
system("mkdir -p $dir");
chdir($dir);
open($pipe, "|-", "gunzip|cpio -i");

print $pipe $content;
close $pipe;

