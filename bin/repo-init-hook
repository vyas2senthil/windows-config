#!/bin/bash

perl -ne 'print unless /tcmd/' manifest.xml > manifest.xml.new
if ! diff -q manifest.xml.new manifest.xml.old; then
    rm manifest.xml -f
    cp manifest.xml.new manifest.xml -av
else
    rm manifest.xml -f
    cp manifest.xml.old manifest.xml -av
fi

if test ! -e local_manifest.xml; then
    cat <<EOF > local_manifest.xml
<?xml version="1.0" encoding="UTF-8"?>
<manifest>

  <remote  name="apse"
           fetch="shgit.marvell.com:/git/android"
           review="http://bible/gerrit/" />

  <project path="vendor/marvell/generic/tcmd" name="vendor/marvell/generic/tcmd" revision="master" remote="apse" />
</manifest>
EOF
fi
