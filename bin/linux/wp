#!/bin/bash

function swp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    HFILE=$FILE

    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,\\\\\\\\,; s,/,\\\\,g'`
    else
        FILE=z:$FILE
    fi
    echo -n "$FILE"
    history -s swp "$(printf %q "$HFILE")"
}

function sup()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`
    
    HFILE=$FILE
    
    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,smb://,g'`
    else
        FILE=z:$FILE
    fi
    printf %q "$FILE"
    history -s sup "$(printf %q "$HFILE")"
}

function wp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    HFILE=$FILE
    FILE=z:$FILE
    echo -n "$FILE"|perl -npe 's,/,\\,g'
    case $- in
        *i*) history -s wp "$(printf %q "$HFILE")"
    esac
}

function up()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    printf %q "$FILE"
    history -s up "$(printf %q "$FILE")"
}

function mp() #mail path
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    echo -n "$FILE"
    history -s mp "$(printf %q "$FILE")"
}

function tmp() #tramp mail path
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    echo -n "/scp:`whoami`@$LOCALIP:$FILE"
    history -s tmp "$(printf %q "$FILE")"
}

if test "$(basename "$BASH_SOURCE")" = "$0"; then
    "`basename $0`" "$@"|putclip
fi
