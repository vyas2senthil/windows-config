#!/bin/bash

function smb_wp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,\\\\\\\\,; s,/,\\\\,g'`
    else
        FILE=z:$FILE
    fi
    printf %q "$FILE"|tee /dev/tty|putclip
}

function sp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`
    
    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,smb://,g'`
    else
        FILE=z:$FILE
    fi
    printf %q "$FILE"|tee /dev/tty|putclip
}

function wp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    FILE=z:$FILE
    echo -n "$FILE"|perl -npe 's,/,\\,g'|tee /dev/tty|putclip
    history -s wp "$FILE"
}

function up()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    printf %q "$FILE"|tee /dev/tty|putclip
    history -s up "$FILE"
}

if test "$BASH_SOURCE" = "$0"; then
    "`basename $0`" "$@"
fi
