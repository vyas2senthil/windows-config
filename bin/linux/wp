#!/bin/bash

function swp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,\\\\\\\\,; s,/,\\\\,g'`
    else
        FILE=z:$FILE
    fi
    echo -n "$FILE"|tee /dev/tty|putclip
    history -s swp "$(printf %q "$FILE")"
}

function sup()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`
    
    if [[ "$FILE" =~ ~/smb/ ]]; then
        FILE=`echo "$FILE"|perl -npe 's,^.*?/smb/,smb://,g'`
    else
        FILE=z:$FILE
    fi
    printf %q "$FILE"|tee /dev/tty|putclip
    history -s sup "$(printf %q "$FILE")"
}

function wp()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    FILE=z:$FILE
    echo -n "$FILE"|perl -npe 's,/,\\,g'|tee /dev/tty|putclip
    history -s wp "$(printf %q "$FILE")"
}

function up()
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    printf %q "$FILE"|tee /dev/tty|putclip
    history -s up "$(printf %q "$FILE")"
}

function mp() #mail path
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    echo -n "$FILE"|tee /dev/tty|putclip
    history -s mp "$(printf %q "$FILE")"
}

function tmp() #tramp mail path
{
    FILE=${1:-`pwd`}
    FILE=`lookup_file "$FILE"`

    echo -n "/scp:`whoami`@$LOCALIP:$FILE"|tee /dev/tty|putclip
    history -s tmp "$(printf %q "$FILE")"
}

if test "$BASH_SOURCE" = "$0"; then
    "`basename $0`" "$@"
fi
