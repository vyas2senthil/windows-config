#!/bin/bash
tmp=~/.bash_history.$$
(cat ~/.bash_history.bak ~/.bash_history | perl -ne 'print if (length($_) < 1024 and not m/^\s*(hi[lr]|re)\s+/)' | uniq-even-non-ajacent > $tmp) 2>/dev/null
mv $tmp ~/.bash_history.bak
