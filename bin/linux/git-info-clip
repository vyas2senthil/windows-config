#!/bin/bash
# http://github.com/baohaojun/windows-config/raw/master/bin/linux/
. ~/.bashrc-public-bash

set -e
test $# = 0 && set -- .
set -- "$(readlink -f "$(lookup_file $1)")"

if test -d "$1"; then
    cd "$1"
else
    cd "$(dirname "$1")"
fi

cd -P .
git_dir=$(dirname $(lookup_file .git))

stem=/raw/master
if test -d "$1"; then
    stem=/tree/master
fi

lookup_file "$1" |perl -npe 's,'$git_dir',http://github.com/baohaojun/windows-config'$stem','|tr -d '\r\n'|tee /dev/tty|putclip


