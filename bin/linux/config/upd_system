#!/bin/bash
#把windows-config下载回来，并全部拷到~下
#cd ~
#svn co http://windows-config.googlecode.com/svn/trunk
#mv ~/trunk/* ~/trunk/.* ~ 

#先把一些常用的软件装上，包括编译Android需要用到的软件。

#make sure postfix is installed first, so that exim4 don't show up.

sudo apt-get install -y postfix

#all the other packages

packages='
ant
ascii
autoconf
automake
automake1.9
autotools-dev
bash-doc
binutils
binutils-dev
binutils-doc
binutils-static
bison
build-essential
cli-common-dev
command-not-found
conkeror
cramfsprogs
cscope
curl
debhelper
dialog
dictionary-el
dict-jargon
dict-moby-thesaurus
dict-web1913
dict-wn
dovecot-imapd
dpatch
eclipse
eclipse-jdt
eclipse-pde
eclipse-platform
eclipse-platform-data
eclipse-plugin-cvs
eclipse-rcp
emacs23
emacs23-common-non-dfsg
emacs-goodies-el
expect
exuberant-ctags
fakeroot
flashplugin-installer
flex
fontforge
gcc-4.4-doc
gcc-multilib
gdb-doc
git-core
gitk
git-svn
glibc-doc
global
g++-multilib
gnupg
gperf
grub2
grun
gtk-doc-tools
hibernate
htop
ia32-libs
imagemagick
intltool
iotop
language-pack-en
language-pack-zh
lftp
lib32ncurses5-dev
lib32readline5-dev
lib32z-dev
libavahi-cil-dev
libc6-dev-i386
libchm-dev
libcurses-perl
libcurses-ruby
libcurses-ui-perl
libcurses-widgets-perl
libesd0-dev
libexif-dev
libexpect-perl
libgconf2.0-cil-dev
libglade2.0-cil-dev
libgmime2.2a-cil
libgnome2.0-cil-dev
libgnome-desktop-dev
libgnome-vfs2.0-cil-dev
libgsf0.0-cil
libgtk2.0-cil-dev
libgtk2.0-dev
libltdl7
libmono-cairo2.0-cil
libmono-dev
libmono-sharpzip2.84-cil
libmono-sqlite2.0-cil
libmono-system-runtime2.0-cil
libncurses5-dev
libncursesw5-dev
libndesk-dbus1.0-cil-dev
libndesk-dbus-glib1.0-cil-dev
librsvg2-dev
libruby1.8
libsdl-dev
libsqlite3-dev
libtaglib-cil-dev
libtool
libwv-dev
libwxgtk2.6-dev
libx11-dev
libxml2-dev
libxss-dev
libz-dev
lynx
make-doc
manpages
manpages-dev
markdown
meld
minicom
mono-devel
monodoc-base
mplayer
msn-pecan
msttcorefonts
muse-el
ncurses-dev
ncurses-hexedit
ncurses-term
nmap
offlineimap
openjdk-6-doc
openjdk-6-jdk
openssh-server
p7zip
p7zip-full
pbzip2
pidgin
pkg-config
postfix
python2.6-doc
python3.1
python-html2text
python-qt4
python-soappy
python-svn
pyvnc2swf
rdesktop
rep
samba
sawfish
scim
screen
scrot
sharutils
smbnetfs
ssh
subversion
subversion-tools
sysv-rc-conf
tkdiff
traceroute
ttf-wqy-microhei
ttf-wqy-zenhei
ubuntu-desktop
gnome
unrar
unzip
valgrind
vim
vnc4server
w3m-el-snapshot
wget
wmctrl
wmii
x11proto-core-dev
xchm
xclip
xdg-utils
xfonts-wqy
xmlstarlet
xtightvncviewer
youtube-dl
zip
zlib1g-dev
'

#lunar-applet

sudo apt-get update
sudo apt-get dist-upgrade -y

while ! sudo apt-get install -y $packages; do
    packages=$(arg1-arg2 "$packages" "$(sudo apt-get install -y $packages 2>&1)");
done

sudo apt-get build-dep -y scim-pinyin sawfish librep rep-gtk

#把一些软件默认的版本换掉
sudo update-alternatives --set emacs /usr/bin/emacs23 || true
sudo update-alternatives --set emacsclient /usr/bin/emacsclient.emacs23 || true
sudo update-alternatives --set etags /usr/bin/etags.emacs23 || true

#我们用的桌面系统是gnome，但是窗口管理器要换一个，gnome自带的是metacity，我们要用sawfish
gconftool-2 -s /desktop/gnome/applications/window_manager/default --type string /usr/bin/sawfish
#gconftool-2 -s /desktop/gnome/session/required_components/panel --type string gnome-panel-zh
#sudo cp ~/doc/gnome-panel-zh.desktop /usr/share/applications/

#我们要用的字体
mkdir -p ~/.fonts
cp ~/doc/monaco-linux.ttf ~/.fonts
fc-cache -v

#String::ShellQuote is needed by beagle-grep.sh/edit
sudo cpan String::ShellQuote

#设置gmail邮件
test `whoami` = bhj && . config_email || true
test `whoami` = bhj && sudo apt-get install texlive-full || true
test `whoami` = bhj && crontab ~/.crontab
