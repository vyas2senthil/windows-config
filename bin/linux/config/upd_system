#!/bin/bash
#把windows-config下载回来，并全部拷到~下
#cd ~
#svn co http://windows-config.googlecode.com/svn/trunk
#mv ~/trunk/* ~/trunk/.* ~ 

#先把一些常用的软件装上，包括编译Android需要用到的软件。

#make sure postfix is installed first, so that exim4 don't show up.

sudo apt-get install -y postfix

#all the other packages

packages='
ant
ascii
automake1.9
bash-doc
binutils
binutils-dev
binutils-doc
bison
build-essential
conkeror
cramfsprogs
cscope
curl
dialog
dictionary-el
dict-jargon
dict-moby-thesaurus
dict-web1913
dict-wn
dovecot-imapd
eclipse
eclipse-jdt
eclipse-pde
eclipse-platform
eclipse-platform-data
eclipse-plugin-cvs
eclipse-rcp
emacs23
emacs-goodies-el
expect
exuberant-ctags
fakeroot
flex
fontforge
gcc-multilib
git-core
gitk
git-svn
glibc-doc
global
g++-multilib
gnupg
gperf
grub2
grun
hibernate
htop
imagemagick
iotop
libcurses-perl
libcurses-ruby
libcurses-ui-perl
libcurses-widgets-perl
libesd0-dev
libexpect-perl
libltdl7
libncurses5-dev
libncursesw5-dev
libruby1.8
libsdl-dev
libtool
libwxgtk2.6-dev
libx11-dev
libz-dev
lynx
manpages
manpages-dev
markdown
meld
minicom
mplayer
msn-pecan
muse-el
ncurses-dev
ncurses-hexedit
ncurses-term
nmap
offlineimap
openjdk-6-doc
openssh-server
p7zip
p7zip-full
pbzip2
pidgin
postfix
python2.6-doc
python3.1
python-html2text
python-qt4
python-soappy
python-svn
rep
samba
sawfish
screen
scrot
scim
sharutils
smbnetfs
ssh
subversion
subversion-tools
sysv-rc-conf
tkdiff
traceroute
ttf-wqy-microhei
ttf-wqy-zenhei
unzip
valgrind
vim
w3m-el-snapshot
wget
wmctrl
wmii
x11proto-core-dev
xchm
xclip
xfonts-wqy
xmlstarlet
youtube-dl
zip
zlib1g-dev
'

ubuntu_packages='
binutils-static
flashplugin-installer
gcc-4.4-doc
language-pack-en
language-pack-zh
make-doc
msttcorefonts
ubuntu-desktop
unrar
'

x86_64_packages='
ia32-libs
lib32ncurses5-dev
lib32readline5-dev
lib32z-dev
libc6-dev-i386
'
#lunar-applet

sudo apt-get update
sudo apt-get dist-upgrade -y
sudo apt-get install -y $packages || for x in $packages; do sudo apt-get install -y $x; done || (echo 'Some packages failed to install!'; sleep 3)
sudo apt-get install -y $x86_64_packages || for x in $x86_64_packages; do sudo apt-get install -y $x; done || (echo 'Some packages failed to install!'; sleep 3)
sudo apt-get install -y $ubuntu_packages || for x in $ubuntu_packages; do sudo apt-get install -y $x; done || (echo 'Some packages failed to install!'; sleep 3)
sudo apt-get build-dep -y beagle scim-pinyin sawfish librep rep-gtk

#把一些软件默认的版本换掉
sudo update-alternatives --set emacs /usr/bin/emacs23 || true
sudo update-alternatives --set emacsclient /usr/bin/emacsclient.emacs23 || true
sudo update-alternatives --set etags /usr/bin/etags.emacs23 || true

#我们用的桌面系统是gnome，但是窗口管理器要换一个，gnome自带的是metacity，我们要用sawfish
gconftool-2 -s /desktop/gnome/applications/window_manager/default --type string /usr/bin/sawfish
#gconftool-2 -s /desktop/gnome/session/required_components/panel --type string gnome-panel-zh
#sudo cp ~/doc/gnome-panel-zh.desktop /usr/share/applications/

#我们要用的字体
mkdir -p ~/.fonts
cp ~/doc/monaco-linux.ttf ~/.fonts
fc-cache -v

#String::ShellQuote is needed by beagle-grep.sh/edit
sudo cpan String::ShellQuote

#设置gmail邮件
test `whoami` = bhj && . config_email || true
test `whoami` = bhj && sudo apt-get install texlive-full vnc4server pyvnc2swf xtightvncviewer || true
test `whoami` = bhj && crontab ~/.crontab
