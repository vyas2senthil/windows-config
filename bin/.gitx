#!/bin/bash
function git()
{

    (
	if test "`readlink -f .`" = "`readlink -f ~`" -a "$1" != clone
	then
            cd ~/windows-config/;
	fi

	if test "$1" = st -a "$2" = -S; then
	    command git status -s | perl -ne '
chomp(); 
$_ = substr($_, 3); 
if (m/^"/) { 
    $_ = eval($_);
}
print $_ . "\n";
'
	  exit
	fi
        if test "$1" = clean; then
            if command git st -s | grep ??; then
                echo Error: git not clean, will not clean it
                exit 0
            fi
        fi
    
	command git "$@"
    )

}
