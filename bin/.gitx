#!/bin/bash
function git()
{

    (
	if test "`readlink -f .`" = "`readlink -f ~`" -a "$1" != clone
	then
            cd ~/windows-config/;
	fi

	if test "$1" = st -a "$2" = -S; then
	    command git status -s | perl -ne '
chomp(); 
$_ = substr($_, 3); 
if (m/^"/) { 
    $_ = eval($_);
}
print $_ . "\n";
'
	  exit
	fi
        if test "$1" = clean; then
            if command git st -s | grep '??'; then
                echo Warning: git not clean, will not clean it
                if yes-or-no-p -n "Continue?"; then
                    true;
                else
                    echo Please use: command git clean -xfd
                    exit -1
                fi
            fi
        fi
    
	command git "$@"
    )

}
